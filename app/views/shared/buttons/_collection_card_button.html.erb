
<% existing_medium = Medium.find_by(title: medium["name"], year: year) %>
<% if existing_medium %>
  <% if Collection.find_by(medium_id: existing_medium.id, user_id: current_user.id).nil? %>
  <%= button_to create_record_media_path( new_medium: medium, favorite: "collection", medium_type: medium_type ),
      method: :post,
      data: { turbo_stream: true } do %>
    <i class="fa-regular fa-eye"></i>
  <% end %>
  <% else %>
    <%= link_to collection_path(Collection.find_by(medium_id: existing_medium.id, user_id: current_user.id)), data: { turbo_method: "DELETE" } do %>
      <i class="fa-solid fa-eye"></i>
    <% end %>
  <% end %>
<% else  %>
  <%= button_to create_record_media_path( new_medium: medium, favorite: "collection", medium_type: medium_type ),
      method: :post,
      data: { turbo_stream: true } do %>
      <i class="fa-regular fa-eye"></i>
    <% end %>
<% end %>
