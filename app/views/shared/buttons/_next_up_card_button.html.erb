<% existing_medium = Medium.find_by(title: medium["name"], year: medium["first_release_date"]) %>
<% if existing_medium %>
  <% if medium && current_user.favorited?(existing_medium, scope: :next_up)  %>
    <%= link_to toggle_next_up_medium_path(existing_medium) do %>
      <i class="fa-solid fa-calendar"></i>
    <% end %>
  <% else %>
    <%= link_to toggle_next_up_medium_path(existing_medium) do %>
      <i class="fa-regular fa-calendar"></i>
    <% end %>
  <% end %>
<% else  %>
  <%= button_to create_record_media_path( new_medium: medium, favorite: "next_up", medium_type: medium_type ),
      method: :post,
      data: { turbo_stream: true } do %>
      <i class="fa-regular fa-calendar"></i>
    <% end %>
<% end %>
